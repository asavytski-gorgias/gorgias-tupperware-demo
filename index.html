<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tupperware Consumer Warranty</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .lang-flag {
            color: #e74c3c;
            font-weight: bold;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 30px;
            color: #333;
            font-weight: 300;
        }

        .warranty-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
            font-size: 14px;
            line-height: 1.5;
        }

        .warranty-link {
            color: #007bff;
            text-decoration: none;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            margin-top: 30px;
            color: #333;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1;
        }

        .form-group.full-width {
            flex: 100%;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #007bff;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .product-hint {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .upload-section {
            margin: 20px 0;
        }

        .file-upload {
            border: 2px dashed #ddd;
            padding: 20px;
            text-align: center;
            background: #fafafa;
            border-radius: 4px;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .file-upload:hover {
            border-color: #007bff;
        }

        .file-upload input {
            display: none;
        }

        .upload-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .checkbox-group {
            margin: 20px 0;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .checkbox-group label {
            display: inline;
            font-weight: normal;
        }

        .next-steps {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 30px 0;
        }

        .button-row {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            flex: 1;
        }

        .btn-cancel {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #ddd;
        }

        .btn-cancel:hover {
            background: #e9ecef;
        }

        .btn-submit {
            background: #17a2b8;
            color: white;
        }

        .btn-submit:hover {
            background: #138496;
        }

        .footer-note {
            font-size: 12px;
            color: #666;
            margin-top: 20px;
            text-align: center;
        }

        .required {
            color: #e74c3c;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .button-row {
                flex-direction: column;
            }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #17a2b8;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message, .error-message {
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .btn-submit:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">TupperwareÂ®</div>
            <div class="lang-flag">ðŸ‡¨ðŸ‡¦ en-CA</div>
        </div>

        <h1>Consumer Warranty</h1>

        <div class="warranty-info">
            <p>Tupperware provides the Limited Lifetime Warranty described in this policy for most of its products. Products that are not covered by the Limited Lifetime Warranty are noted with an exception in the applicable catalog, product literature or product description and are subject to the warranty terms specified in these materials.</p>
            <br>
            <p>In order to help us process your claim efficiently, please click link to review our Tupperware Warranty Policy.</p>
            <a href="#" class="warranty-link">TUPPERWAREÂ® Warranty â€“ Tupperware</a>
        </div>

        <div class="section-title">Warranty Form Guidelines</div>
        <div class="warranty-info">
            <p>In order for us to process your warranty request in the best and clearest way, it is mandatory to fill out a separate warranty request for each product (part) that is subject to warranty. For example, if you want to create a warranty request for two items, you will have to fill out two forms and go through the corresponding process. Unfortunately, it is not possible to combine multiple products into one warranty request.</p>
            <br>
            <p>Please read the following information carefully, fill in the following fields of the digital warranty request form.</p>
        </div>

        <div class="error-message" id="errorMessage">
            <strong>Error!</strong> There was a problem submitting your warranty claim. Please try again or contact support.
        </div>

        <form id="warrantyForm">
            <div class="section-title">Customer Information</div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="firstName">First name <span class="required">*</span></label>
                    <input type="text" id="firstName" name="firstName" required>
                </div>
                <div class="form-group">
                    <label for="lastName">Last name <span class="required">*</span></label>
                    <input type="text" id="lastName" name="lastName" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group full-width">
                    <label for="street">Street <span class="required">*</span></label>
                    <input type="text" id="street" name="street" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="postalCode">Postal Code <span class="required">*</span></label>
                    <input type="text" id="postalCode" name="postalCode" required>
                </div>
                <div class="form-group">
                    <label for="city">City <span class="required">*</span></label>
                    <input type="text" id="city" name="city" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="email">Email <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="confirmEmail">Confirm Email <span class="required">*</span></label>
                    <input type="email" id="confirmEmail" name="confirmEmail" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone">
                </div>
            </div>

            <div class="section-title">Product Information</div>

            <div class="form-row">
                <div class="form-group full-width">
                    <label for="productName">Mould number / Product name <span class="required">*</span></label>
                    <input type="text" id="productName" name="productName" required>
                    <div class="product-hint">
                        Please enter at least 3 characters to search for a product. Tupperware Product Mould #'s are typically embossed on the bottom of your product or on the edges of your unit. If you cannot find a product mould #, you may try searching by description.
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group full-width">
                    <label for="claimDescription">Claim Description <span class="required">*</span></label>
                    <textarea id="claimDescription" name="claimDescription" required></textarea>
                </div>
            </div>

            <div class="upload-section">
                <div class="section-title">Upload Photo</div>
                <div class="file-upload" onclick="document.getElementById('photoUpload').click()">
                    <p>Image Upload - Please ensure damage is clear and visible in your image</p>
                    <div class="upload-btn">Select File</div>
                    <input type="file" id="photoUpload" name="photoUpload" accept="image/*">
                </div>
            </div>

            <div class="section-title">Purchase Information</div>

            <div class="form-row">
                <div class="form-group">
                    <label for="purchaseSource">Source of Original Purchase <span class="required">*</span></label>
                    <select id="purchaseSource" name="purchaseSource" required>
                        <option value="">Select source...</option>
                        <option value="tupperware-consultant">Tupperware Consultant</option>
                        <option value="tupperware-party">Tupperware Party</option>
                        <option value="online-store">Online Store</option>
                        <option value="retail-store">Retail Store</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="proofOfPurchase" name="proofOfPurchase">
                <label for="proofOfPurchase">Proof of Purchase (Optional)</label>
            </div>

            <div class="next-steps">
                <div class="section-title">What's next?</div>
                <p>Your warranty request will be reviewed by our team. During our evaluation time, please hold onto your product incase we require more information. You will be notified of the resolution via email once the review is complete.</p>
            </div>

            <div class="next-steps">
                <div class="section-title">What to expect if your claim is approved</div>
                <p>If approved, you will receive a voucher that can be redeemed at Tupperware.ca, where you may attach your order to your favorite consultant.</p>
            </div>

            <div class="loading" id="loadingMessage">
                <div class="spinner"></div>
                <p>Submitting your warranty claim...</p>
            </div>

            <div class="success-message" id="successMessage">
                <strong>Success!</strong> Your warranty claim has been submitted successfully. You will receive a confirmation email shortly.
            </div>

            <div class="button-row">
                <button type="button" class="btn btn-cancel" onclick="resetForm()">Cancel</button>
                <button type="submit" class="btn btn-submit" id="submitBtn">Submit</button>
            </div>

            <div class="footer-note">
                Fields with a <span class="required">*</span> are mandatory<br>
                For full warranty details and FAQ on all Tupperware Products, please visit www.tupperware.ca/pages/warranty
            </div>
        </form>
    </div>

    <script>
        // EmailJS configuration - YOU NEED TO UPDATE THESE VALUES
        const EMAILJS_CONFIG = {
            PUBLIC_KEY: '9MV614HeLsDEpMYIE',  // Get from EmailJS dashboard
            SERVICE_ID: 'service_b52sukg',  // Your email service ID
            TEMPLATE_ID: 'template_m5rh677' // Your email template ID
        };

        // Initialize EmailJS
        emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY);

        // Email validation
        function validateEmails() {
            const email = document.getElementById('email').value;
            const confirmEmail = document.getElementById('confirmEmail').value;
            
            if (email !== confirmEmail) {
                showError('Email addresses do not match!');
                return false;
            }
            return true;
        }

        // Show/hide messages
        function showSuccess(message) {
            hideAllMessages();
            const successDiv = document.getElementById('successMessage');
            if (message) successDiv.innerHTML = `<strong>Success!</strong> ${message}`;
            successDiv.style.display = 'block';
        }

        function showError(message) {
            hideAllMessages();
            const errorDiv = document.getElementById('errorMessage');
            if (message) errorDiv.innerHTML = `<strong>Error!</strong> ${message}`;
            errorDiv.style.display = 'block';
        }

        function showLoading() {
            hideAllMessages();
            document.getElementById('loadingMessage').style.display = 'block';
            document.getElementById('submitBtn').disabled = true;
        }

        function hideAllMessages() {
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('loadingMessage').style.display = 'none';
            document.getElementById('submitBtn').disabled = false;
        }

        // Form submission handler
        document.getElementById('warrantyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!validateEmails()) {
                return;
            }

            showLoading();

            try {
                // Collect form data
                const formData = new FormData(this);
                const photoFile = formData.get('photoUpload');
                
                // Prepare email parameters
                const templateParams = {
                    to_email: 'n2kmlgdly3pode16@email.gorgias.com',
                    customer_name: `${formData.get('firstName')} ${formData.get('lastName')}`,
                    first_name: formData.get('firstName'),
                    last_name: formData.get('lastName'),
                    street: formData.get('street'),
                    city: formData.get('city'),
                    postal_code: formData.get('postalCode'),
                    email: formData.get('email'),
                    phone: formData.get('phone') || 'Not provided',
                    product_name: formData.get('productName'),
                    claim_description: formData.get('claimDescription'),
                    purchase_source: formData.get('purchaseSource'),
                    proof_of_purchase: formData.get('proofOfPurchase') ? 'Yes' : 'No',
                    submission_date: new Date().toLocaleDateString(),
                    attachment_name: photoFile && photoFile.size > 0 ? photoFile.name : 'No file uploaded - customer notified to email separately'
                };

                // Note: Removing attachment due to EmailJS 50KB limit
                // Customer will be informed to email photos separately

                // Send email via EmailJS
                const response = await emailjs.send(
                    EMAILJS_CONFIG.SERVICE_ID,
                    EMAILJS_CONFIG.TEMPLATE_ID,
                    templateParams
                );

                if (response.status === 200) {
                    if (photoFile && photoFile.size > 0) {
                        showSuccess('Your warranty claim has been submitted successfully! Please email your photo separately to n2kmlgdly3pode16@email.gorgias.com with your name in the subject line.');
                    } else {
                        showSuccess('Your warranty claim has been submitted successfully. You will receive a confirmation email shortly.');
                    }
                    document.getElementById('warrantyForm').reset();
                    document.querySelector('.file-upload p').textContent = 'Image Upload - Please ensure damage is clear and visible in your image';
                } else {
                    throw new Error('Failed to send email');
                }

            } catch (error) {
                console.error('EmailJS Error:', error);
                const errorMessage = error?.message || error?.text || 'Unknown error';
                
                if (errorMessage.includes('Variables size limit') || errorMessage.includes('413')) {
                    showError('Form data too large. Please shorten your claim description and try again.');
                } else if (errorMessage.includes('File size')) {
                    showError('Image file is too large. Please use a smaller image (under 5MB).');
                } else if (errorMessage.includes('Only image files')) {
                    showError('Please upload only image files (JPG, PNG, etc.).');
                } else {
                    showError('There was a problem submitting your warranty claim. Please try again or contact support directly.');
                }
            }
        });

        // Reset form
        function resetForm() {
            if (confirm('Are you sure you want to clear all form data?')) {
                document.getElementById('warrantyForm').reset();
                document.querySelector('.file-upload p').textContent = 'Image Upload - Please ensure damage is clear and visible in your image';
                hideAllMessages();
            }
        }

        // File upload preview
        document.getElementById('photoUpload').addEventListener('change', function(e) {
            const fileName = e.target.files[0]?.name;
            if (fileName) {
                document.querySelector('.file-upload p').textContent = `Selected: ${fileName}`;
            } else {
                document.querySelector('.file-upload p').textContent = 'Image Upload - Please ensure damage is clear and visible in your image';
            }
        });
    </script>
</body>
</html> 